/**
 * Copyright (c) 2020 Wei-Lun Hsu. All Rights Reserved.
 */
/** @file strcpy.c
 *
 * @author Wei-Lun Hsu
 * @version 0.1
 * @date 2020/02/21
 * @license
 * @description
 */


//=============================================================================
//                  Constant Definition
//=============================================================================

//=============================================================================
//                  Macro Definition
//=============================================================================

//=============================================================================
//                  Structure Definition
//=============================================================================

//=============================================================================
//                  Global Data Definition
//=============================================================================

//=============================================================================
//                  Private Function Definition
//=============================================================================

//=============================================================================
//                  Public Function Definition
//=============================================================================
char* __attribute__((naked)) __my_strcpy(char *dest, const char *src)
{
    __asm volatile(
        "mov	r3, r0          \n\t"
        "1:                     \n\t"
        "ldrb	r2, [r1], #1    \n\t"
        "strb	r2, [r3], #1    \n\t"
        "cmp	r2, #0          \n\t"
        "bne	1b              \n\t"
        "bx	lr                  \n\t"
    );
}
